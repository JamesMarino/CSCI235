/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Subject:            CSCI235 Databases
    Script name:        dbcreate.sql
    Written by:         Dr Janusz R. Getta
    Task:               Create a sample database
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
SET ECHO OFF
SET LINESIZE 200
SET WRAP OFF
PROMPT Create and load a sample database for CSCI235 labs

CREATE TABLE PROJECT(
P#	NUMBER(6),
TITLE	VARCHAR2(200)	NOT NULL,
BUDGET	NUMBER(9,2)	    NULL,
STARTD	DATE		NOT NULL,
ENDD	DATE		NOT NULL,
	CONSTRAINT PROJECT_PKEY PRIMARY KEY (P#));

INSERT INTO PROJECT VALUES(007, 'GOLDFINGER', 999.99, '12-DEC-04', '01-JAN-09');
 
CREATE TABLE DEPARTMENT(
DNAME        VARCHAR(14),
BUDGET       NUMBER(3),
CHAIRMAN     VARCHAR(30),
	CONSTRAINT DEPARTMENT_PKEY PRIMARY KEY(DNAME),
	CONSTRAINT DEPARTMENT_CKEY UNIQUE(CHAIRMAN),
	CONSTRAINT BUDGET CHECK (BUDGET>0 AND BUDGET <= 700));

INSERT INTO DEPARTMENT VALUES
      ('ACCOUNTING', 200, 'J.R. SMITH' );
INSERT INTO DEPARTMENT VALUES
       ('RESEARCH', 300, 'P.J. BLACK' );
INSERT INTO DEPARTMENT VALUES
       ('SALES', 400, 'W.W. SALESMAN' );
INSERT INTO DEPARTMENT VALUES
       ('OPERATIONS', NULL, 'C.J. DATE' );
INSERT INTO DEPARTMENT VALUES
       ('TRANSPORT', 200, 'G. SPEED' );
INSERT INTO DEPARTMENT VALUES
       ('IT', 500, 'E.F. CODD' );

CREATE TABLE DP(
DNAME   VARCHAR(14),
P#	NUMBER(6),
	CONSTRAINT DP_PKEY PRIMARY KEY(DNAME, P#),
	CONSTRAINT DP_FKEY1 FOREIGN KEY(DNAME)
		REFERENCES DEPARTMENT(DNAME),
	CONSTRAINT DP_FKEY2 FOREIGN KEY(P#)
		REFERENCES PROJECT(P#));


CREATE TABLE DEPTLOC(
DNAME   VARCHAR(14),
CITY    VARCHAR(13),
STREET# NUMBER(3),
BLDG#   NUMBER(4),
LEVEL#  NUMBER(2),
	CONSTRAINT DEPTLOC_PKEY 
		PRIMARY KEY(DNAME, CITY, STREET#, BLDG#, LEVEL#),
	CONSTRAINT DEPTLOC_FKEY FOREIGN KEY(DNAME) 
		REFERENCES DEPARTMENT(DNAME));

INSERT INTO DEPTLOC VALUES
	('IT','SAN FRANCISCO', 35, 45, 80);
INSERT INTO DEPTLOC VALUES
	('ACCOUNTING','NEW YORK', 30, 123, 99);
INSERT INTO DEPTLOC VALUES
	('SALES','NEW YORK', 30, 123, 99);
INSERT INTO DEPTLOC VALUES
	('RESEARCH','NEW YORK', 30, 123, 99);
INSERT INTO DEPTLOC VALUES 
        ('RESEARCH','DALLAS', 23, 100, 88);
INSERT INTO DEPTLOC VALUES
	('OPERATIONS','BOSTON', 45, 34, 10);
INSERT INTO DEPTLOC VALUES
	('RESEARCH','BOSTON', 20, 20, 1);
INSERT INTO DEPTLOC VALUES
	('RESEARCH', 'LOS ANGELES', 30, 30, 1);
INSERT INTO DEPTLOC VALUES
	('SALES','DALLAS', 34, 1, 6);
INSERT INTO DEPTLOC VALUES
	('SALES','LOS ANGELES', 35, 1, 99);
INSERT INTO DEPTLOC VALUES
	('SALES','NEW YORK', 34, 7, 33);
INSERT INTO DEPTLOC VALUES
	('SALES','CHICAGO', 34, 1, 90);
INSERT INTO DEPTLOC VALUES
	('SALES', 'BOSTON', 29, 999, 34);
INSERT INTO DEPTLOC VALUES
	('SALES', 'PARIS', 19, 77, 34);
INSERT INTO DEPTLOC VALUES
        ('TRANSPORT', 'NEW YORK', 34, 56, 23);

CREATE TABLE EMPLOYEE(
E# 		NUMBER(4),
ENAME 		VARCHAR2(10),
MANAGER#   	NUMBER(4),
HIREDATE 	DATE,
SALARY 		NUMBER(7,2),
COMM 		NUMBER(7,2),
DNAME 		VARCHAR(14),
CITY		VARCHAR(13),
STREET#		NUMBER(3),
BLDG#		NUMBER(4),
LEVEL#		NUMBER(2),
	CONSTRAINT EMPLOYEE_PKEY PRIMARY KEY(E#),
	CONSTRAINT EMPLOYEE_FKEY1 FOREIGN KEY(DNAME) 
		REFERENCES DEPARTMENT(DNAME),
	 CONSTRAINT EMPLOYEE_FKEY2 
		FOREIGN KEY(DNAME,CITY,STREET#,BLDG#,LEVEL#) 
			REFERENCES DEPTLOC(DNAME,CITY,STREET#,BLDG#,LEVEL#) 
       );
 
INSERT INTO EMPLOYEE VALUES
	(7839,'KING',NULL,TO_DATE('17-NOV-1990', 'DD-MON-YYYY'),5000,NULL,'RESEARCH', 'NEW YORK', 30, 123, 99);
INSERT INTO EMPLOYEE VALUES
	(7566,'JONES',7839,TO_DATE('2-APR-1881', 'DD-MON-YYYY'),2975,NULL,'ACCOUNTING','NEW YORK', 30, 123, 99);
INSERT INTO EMPLOYEE VALUES
	(7698,'BLAKE',7839,TO_DATE('1-MAY-1981', 'DD-MON-YYYY'),2850,NULL,'OPERATIONS','BOSTON', 45, 34, 10);
INSERT INTO EMPLOYEE VALUES
	(7782,'CLARK',7839,TO_DATE('9-JUN-1981', 'DD-MON-YYYY'),2450,NULL,'ACCOUNTING','NEW YORK', 30, 123, 99);
INSERT INTO EMPLOYEE VALUES
	(7788,'SCOTT',7566,TO_DATE('09-DEC-1982', 'DD-MON-YYYY'),3000,NULL,'RESEARCH','NEW YORK', 30, 123, 99);
INSERT INTO EMPLOYEE VALUES
	(7902,'FORD',7566,TO_DATE('3-DEC-1981', 'DD-MON-YYYY'),3000,NULL,'OPERATIONS','BOSTON', 45, 34, 10);
INSERT INTO EMPLOYEE VALUES
	(7499,'ALLEN',7698,TO_DATE('20-FEB-1981', 'DD-MON-YYYY'),1600,300,'SALES','LOS ANGELES', 35, 1, 99);
INSERT INTO EMPLOYEE VALUES
	(7466,'ALLEN',7698,TO_DATE('10-JUN-1976', 'DD-MON-YYYY'),2000,335,'SALES','BOSTON', 29, 999, 34);
INSERT INTO EMPLOYEE VALUES
	(7498,'ALLEN',7698,TO_DATE('20-FEB-1981', 'DD-MON-YYYY'),1600,300,'SALES','LOS ANGELES', 35, 1, 99);
INSERT INTO EMPLOYEE VALUES
	(7521,'WARD',7698,TO_DATE('22-FEB-1981', 'DD-MON-YYYY'),1250,500,'SALES','CHICAGO', 34, 1, 90);
INSERT INTO EMPLOYEE VALUES
	(7654,'MARTIN',7698,TO_DATE('28-SEP-1981', 'DD-MON-YYYY'),1250,1400,'SALES','DALLAS', 34, 1, 6);
INSERT INTO EMPLOYEE VALUES
	(7844,'TURNER',7698,TO_DATE('8-SEP-1981', 'DD-MON-YYYY'),1500,100,'SALES','NEW YORK', 30, 123, 99);
INSERT INTO EMPLOYEE VALUES
	(7234,'BONAPARTE',7466,TO_DATE('8-MAY-1966', 'DD-MON-YYYY'),1500,100,'SALES','PARIS', 19, 77, 34);
INSERT INTO EMPLOYEE VALUES
	(7235,'D''ARC',7466,TO_DATE('20-FEB-1978', 'DD-MON-YYYY'),2200,300,'SALES','PARIS', 19, 77, 34);
INSERT INTO EMPLOYEE VALUES
	(7900,'JAMES',7698,TO_DATE('3-DEC-1981', 'DD-MON-YYYY'),950,NULL,'ACCOUNTING','NEW YORK', 30, 123, 99);
INSERT INTO EMPLOYEE VALUES
	(7876,'ADAMS',7788,TO_DATE('12-JAN-1983', 'DD-MON-YYYY'),1100,NULL,'ACCOUNTING','NEW YORK', 30, 123, 99);
INSERT INTO EMPLOYEE VALUES
	(7369,'SMITH',7902,TO_DATE('17-DEC-1980', 'DD-MON-YYYY'),800,NULL,'OPERATIONS','BOSTON', 45, 34, 10);
INSERT INTO EMPLOYEE VALUES
	(7811,'HILL',7876,TO_DATE('23-DEC-1980', 'DD-MON-YYYY'),1800,NULL,'TRANSPORT', 'NEW YORK', 34, 56, 23);
INSERT INTO EMPLOYEE VALUES
	(7812,'LAUDA',7521,TO_DATE('22-JUN-1950', 'DD-MON-YYYY'),1100,500,'TRANSPORT', 'NEW YORK', 34, 56, 23);
INSERT INTO EMPLOYEE VALUES
	(7813,'BERGER',7654,TO_DATE('23-APR-1967', 'DD-MON-YYYY'),1200,300,'TRANSPORT', 'NEW YORK', 34, 56, 23);

COMMIT;
 
PROMPT Done.
/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
